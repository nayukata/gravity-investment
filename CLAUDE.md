# claude.md

このドキュメントは、プロジェクトにおける**コーディング規約・運用原則**を、生成AI（Claude など）/開発者の双方が同じ基準で守れるようにまとめたガイドです。最優先は**保守性**です。常に「シンプル・DRY・SOLID・型安全・プロジェクトの流儀を守る」を基準に実装します。

## 開発ワークフロー（厳守）

### タスク開始前の必須チェック

**以下を完了するまで実装開始禁止**

1. スキル判定を出力したか?
2. 該当スキルがある場合、起動したか?
3. 該当スキルがない場合、理由を明記したか?
4. プラン変更をする場合、再度該当スキルがないか確認したか?

テンプレート:

```
【スキル判定】
タスク: [要約]
該当: [スキル名] / なし
理由: [一言]
```

---

### スキル起動後のルール（厳守）

スキルを起動したら、**スキルファイルの指示が最優先**となる。

1. スキルファイルを上から順に読む
2. 「最初に出力すべきテンプレート」がある場合、それを出力するまで他のアクション禁止
3. ツール呼び出し（MCP、Bash 等）はスキルが許可するまで実行しない

**違反例:**

- スキルのテンプレートを出力せずに実装開始

**正しい例:**

- スキル起動 -> スキルの指示に従いテンプレート出力 -> スキルが許可したらツール実行

---

### 基本の流れ

1. **タスク理解** -> 不明点があれば質問する
2. **スキル判定（必須）** -> 上記「タスク開始前の必須チェック」を実施
3. **実装前のスキル確認**
   - 迷ったらとりあえず使用して確認する
   - プラン作成途中に必要だと判断した場合、スキルを使用する
   - 実装中に新しい作業が発生した場合、再度スキルを使用する
4. 調査・設計 -> 既存コード確認、技術選定
5. 実装 -> スキル活用
6. 品質確保 `pnpm check` -> code-reviewer agent にレビュー依頼
7. 作業内容の報告

Sub Agents（タスク委任）:

- debugger: エラー調査・デバッグ
- code-reviewer: コードレビュー

### エージェント起動ルール

- 大きなコード変更（3 ファイル以上、または 100 行以上）を完了した後は、
  必ず code-reviewer エージェントを起動すること。
- 複数ファイルに変更がある場合は、並列で code-reviewer を起動すること。

### 作業ルール

- 後方互換の名目等で、削除予定・未使用コードを残さない（残骸を検出したら削除）
- 未使用の変数・引数・関数・クラス・コメントアウト・到達不能分岐を残さない
- コメントや README に「実装した／完了」等の進捗・完了宣言を書かない
- 日付や相対時制を書かない（例：いつ実装した、どのバージョンで追加、等）
- 実装状況チェックリストやステータス表のカラムを作らない